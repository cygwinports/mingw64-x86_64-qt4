--- a/mkspecs/win32-g++/qmake.conf	2012-04-26 14:45:52.000000000 -0500
+++ b/mkspecs/win32-g++/qmake.conf	2012-07-30 10:17:04.937015800 -0500
@@ -14,7 +14,7 @@ QMAKE_COMPILER_DEFINES  += __GNUC__ WIN3
 QMAKE_EXT_OBJ           = .o
 QMAKE_EXT_RES           = _res.o
 
-QMAKE_CC		= $${CROSS_COMPILE}gcc
+QMAKE_CC		= x86_64-w64-mingw32-gcc
 QMAKE_LEX		= flex
 QMAKE_LEXFLAGS		=
 QMAKE_YACC		= byacc
@@ -27,7 +27,7 @@ QMAKE_CFLAGS_RELEASE	= -O2
 QMAKE_CFLAGS_DEBUG	= -g
 QMAKE_CFLAGS_YACC	= -Wno-unused -Wno-parentheses
 
-QMAKE_CXX		= $${CROSS_COMPILE}g++
+QMAKE_CXX		= x86_64-w64-mingw32-g++
 QMAKE_CXXFLAGS		= $$QMAKE_CFLAGS
 QMAKE_CXXFLAGS_DEPS	= $$QMAKE_CFLAGS_DEPS
 QMAKE_CXXFLAGS_WARN_ON	= $$QMAKE_CFLAGS_WARN_ON
@@ -50,12 +50,12 @@ QMAKE_RUN_CC_IMP	= $(CC) -c $(CFLAGS) $(
 QMAKE_RUN_CXX		= $(CXX) -c $(CXXFLAGS) $(INCPATH) -o $obj $src
 QMAKE_RUN_CXX_IMP	= $(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<
 
-QMAKE_LINK		= $${CROSS_COMPILE}g++
-QMAKE_LINK_C		= $${CROSS_COMPILE}gcc
+QMAKE_LINK		= $$QMAKE_CXX
+QMAKE_LINK_C		= $$QMAKE_CC
 QMAKE_LFLAGS		=
 QMAKE_LFLAGS_EXCEPTIONS_ON = -mthreads
 QMAKE_LFLAGS_EXCEPTIONS_OFF =
-QMAKE_LFLAGS_RELEASE	= -Wl,-s
+QMAKE_LFLAGS_RELEASE	=
 QMAKE_LFLAGS_DEBUG	=
 QMAKE_LFLAGS_CONSOLE	= -Wl,-subsystem,console
 QMAKE_LFLAGS_WINDOWS	= -Wl,-subsystem,windows
@@ -74,7 +74,7 @@ QMAKE_LIBS_OPENGL       = -lglu32 -lopen
 QMAKE_LIBS_COMPAT       = -ladvapi32 -lshell32 -lcomdlg32 -luser32 -lgdi32 -lws2_32
 QMAKE_LIBS_QT_ENTRY     = -lmingw32 -lqtmain
 
-!isEmpty(QMAKE_SH) {
+system(/bin/true) {
     MINGW_IN_SHELL      = 1
 	QMAKE_DIR_SEP		= /
 	QMAKE_QMAKE		~= s,\\\\,/,
@@ -95,16 +95,16 @@ QMAKE_LIBS_QT_ENTRY     = -lmingw32 -lqt
     QMAKE_CHK_DIR_EXISTS	= if not exist
 }
 
-QMAKE_MOC		= $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}moc$${EXE_SUFFIX}
-QMAKE_UIC		= $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}uic$${EXE_SUFFIX}
+QMAKE_MOC		= x86_64-w64-mingw32-moc-qt4
+QMAKE_UIC		= x86_64-w64-mingw32-uic-qt4
 QMAKE_IDC		= $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}idc$${EXE_SUFFIX}
-QMAKE_RCC		= $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}rcc$${EXE_SUFFIX}
+QMAKE_RCC		= x86_64-w64-mingw32-rcc-qt4
 
 QMAKE_IDL		= midl
-QMAKE_LIB		= $${CROSS_COMPILE}ar -ru
-QMAKE_RC		= $${CROSS_COMPILE}windres
+QMAKE_LIB		= x86_64-w64-mingw32-ar -ru
+QMAKE_RC		= x86_64-w64-mingw32-windres
 QMAKE_ZIP		= zip -r -9
 
-QMAKE_STRIP		= $${CROSS_COMPILE}strip
+QMAKE_STRIP		= x86_64-w64-mingw32-strip
 QMAKE_STRIPFLAGS_LIB 	+= --strip-unneeded
 load(qt_config)
